<html><head><title>explore wasmrepl/html/samples/fac.slisp</title></head><body><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="1409pt" height="663pt"
 viewBox="0.00 0.00 1409.00 663.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="slsvg" class="graph" transform="scale(1 1) rotate(0) translate(4 659)">
<title>G</title>
<polygon fill="#b2dfee" stroke="transparent" points="-4,4 -4,-659 1405,-659 1405,4 -4,4"/>
<g id="slsvg" class="cluster">
<title>cluster_1</title>
<polygon fill="mintcream" stroke="indigo" points="8,-8 8,-647 1393,-647 1393,-8 8,-8"/>
<text text-anchor="middle" x="700.5" y="-631.8" font-family="Times,serif" font-size="14.00">Imp #1</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_6</title>
<polygon fill="mintcream" stroke="indigo" points="16,-16 16,-616 1079,-616 1079,-16 16,-16"/>
<text text-anchor="middle" x="547.5" y="-600.8" font-family="Times,serif" font-size="14.00">Imp #6</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_7</title>
<polygon fill="lightgrey" stroke="yellow" points="24,-24 24,-522 1071,-522 1071,-24 24,-24"/>
<text text-anchor="middle" x="547.5" y="-506.8" font-family="Times,serif" font-size="14.00">#7</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_9</title>
<polygon fill="lightgrey" stroke="yellow" points="710,-200 710,-383 834,-383 834,-200 710,-200"/>
<text text-anchor="middle" x="772" y="-367.8" font-family="Times,serif" font-size="14.00">#9</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_12</title>
<polygon fill="mintcream" stroke="indigo" points="32,-32 32,-414 702,-414 702,-32 32,-32"/>
<text text-anchor="middle" x="367" y="-398.8" font-family="Times,serif" font-size="14.00">Imp #12</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_14</title>
<polygon fill="lightgrey" stroke="yellow" points="451,-113 451,-383 694,-383 694,-113 451,-113"/>
<text text-anchor="middle" x="572.5" y="-367.8" font-family="Times,serif" font-size="14.00">#14</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_19</title>
<polygon fill="lightgrey" stroke="yellow" points="226,-40 226,-275 443,-275 443,-40 226,-40"/>
<text text-anchor="middle" x="334.5" y="-259.8" font-family="Times,serif" font-size="14.00">#19</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_24</title>
<polygon fill="lightgrey" stroke="yellow" points="842,-40 842,-383 1063,-383 1063,-40 842,-40"/>
<text text-anchor="middle" x="952.5" y="-367.8" font-family="Times,serif" font-size="14.00">#24</text>
</g>
<!-- 1 -->
<g id="slnode1" class="node">
<title>1</title>
<polygon fill="lightgreen" stroke="blue" points="1086.53,-467.44 1143,-455 1199.47,-467.44 1199.42,-487.56 1086.58,-487.56 1086.53,-467.44"/>
<text text-anchor="middle" x="1143" y="-469.3" font-family="Times,serif" font-size="14.00">Imp #1</text>
</g>
<!-- 2 -->
<g id="slnode2" class="node">
<title>2</title>
<polygon fill="papayawhip" stroke="black" points="1222.5,-352 1087.5,-352 1087.5,-316 1228.5,-316 1228.5,-346 1222.5,-352"/>
<polyline fill="none" stroke="black" points="1222.5,-352 1222.5,-346 "/>
<polyline fill="none" stroke="black" points="1228.5,-346 1222.5,-346 "/>
<text text-anchor="middle" x="1158" y="-330.3" font-family="Times,serif" font-size="14.00">Variable&lt;result&gt;</text>
</g>
<!-- 1&#45;&gt;2 -->
<g id="slsvg_edge2" class="edge">
<title>1&#45;&gt;2</title>
<path fill="none" stroke="indigo" d="M1144.84,-455.2C1147.37,-432.11 1151.95,-390.3 1154.98,-362.58"/>
<polygon fill="indigo" stroke="indigo" points="1158.49,-362.69 1156.1,-352.37 1151.53,-361.93 1158.49,-362.69"/>
</g>
<!-- 4 -->
<g id="slnode4" class="node">
<title>4</title>
<polygon fill="papayawhip" stroke="black" points="1319.5,-244 1170.5,-244 1170.5,-208 1325.5,-208 1325.5,-238 1319.5,-244"/>
<polyline fill="none" stroke="black" points="1319.5,-244 1319.5,-238 "/>
<polyline fill="none" stroke="black" points="1325.5,-238 1319.5,-238 "/>
<text text-anchor="middle" x="1248" y="-222.3" font-family="Times,serif" font-size="14.00">Variable&lt;number&gt;</text>
</g>
<!-- 2&#45;&gt;4 -->
<g id="slsvg_edge4" class="edge">
<title>2&#45;&gt;4</title>
<path fill="none" stroke="indigo" d="M1172.46,-315.97C1187.13,-298.69 1210.01,-271.74 1226.75,-252.03"/>
<polygon fill="indigo" stroke="indigo" points="1229.47,-254.23 1233.28,-244.34 1224.14,-249.7 1229.47,-254.23"/>
</g>
<!-- 3 -->
<g id="slnode3" class="node">
<title>3</title>
<polygon fill="ivory" stroke="black" points="1325,-491 1217,-491 1217,-455 1325,-455 1325,-491"/>
<text text-anchor="middle" x="1271" y="-469.3" font-family="Times,serif" font-size="14.00">Number&lt;1&gt;</text>
</g>
<!-- 3&#45;&gt;2 -->
<g id="slsvg_edge1" class="edge">
<title>3&#45;&gt;2</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1250.34,-446.96C1230,-422.29 1199.1,-384.83 1178.73,-360.14"/>
<polygon fill="black" stroke="black" points="1247.85,-449.44 1256.92,-454.93 1253.25,-444.98 1247.85,-449.44"/>
<polygon fill="black" stroke="black" points="1181.32,-357.78 1172.26,-352.29 1175.92,-362.23 1181.32,-357.78"/>
</g>
<!-- 6 -->
<g id="slnode6" class="node">
<title>6</title>
<polygon fill="lightcyan" stroke="indigo" points="1038.91,-585 932.47,-585 905.09,-549 1011.53,-549 1038.91,-585"/>
<text text-anchor="middle" x="972" y="-563.3" font-family="Times,serif" font-size="14.00">Imp #6</text>
</g>
<!-- 4&#45;&gt;6 -->
<g id="slsvg_edge35" class="edge">
<title>4&#45;&gt;6</title>
<path fill="none" stroke="indigo" d="M1246.95,-244.14C1244.77,-284.87 1241.34,-386.11 1259,-414 1279.33,-446.09 1314.62,-422.32 1334,-455 1349.19,-480.61 1353.74,-499.71 1334,-522 1314.41,-544.11 1130.96,-557.37 1033,-562.93"/>
<polygon fill="indigo" stroke="indigo" points="1032.72,-559.44 1022.93,-563.49 1033.11,-566.43 1032.72,-559.44"/>
</g>
<!-- 5 -->
<g id="slnode5" class="node">
<title>5</title>
<polygon fill="ivory" stroke="black" points="1384.5,-352 1267.5,-352 1267.5,-316 1384.5,-316 1384.5,-352"/>
<text text-anchor="middle" x="1326" y="-330.3" font-family="Times,serif" font-size="14.00">Number&lt;20&gt;</text>
</g>
<!-- 5&#45;&gt;4 -->
<g id="slsvg_edge3" class="edge">
<title>5&#45;&gt;4</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1307.45,-307.79C1295.18,-291.12 1279.15,-269.33 1266.83,-252.59"/>
<polygon fill="black" stroke="black" points="1304.72,-309.99 1313.47,-315.97 1310.36,-305.84 1304.72,-309.99"/>
<polygon fill="black" stroke="black" points="1269.51,-250.32 1260.76,-244.34 1263.87,-254.47 1269.51,-250.32"/>
</g>
<!-- 6&#45;&gt;1 -->
<g id="slsvg_edge36" class="edge">
<title>6&#45;&gt;1</title>
<path fill="none" stroke="green" d="M1013.05,-550.78C1032.31,-543.06 1055.31,-533 1075,-522 1089.76,-513.76 1105.23,-503.02 1117.68,-493.8"/>
<polygon fill="green" stroke="green" points="1119.9,-496.51 1125.77,-487.7 1115.68,-490.92 1119.9,-496.51"/>
</g>
<!-- 7 -->
<g id="slnode7" class="node">
<title>7</title>
<polygon fill="lightyellow" stroke="yellow" points="894,-485 852,-485 852,-461 894,-461 906,-473 894,-485"/>
<text text-anchor="middle" x="879" y="-469.3" font-family="Times,serif" font-size="14.00">#7 ?</text>
</g>
<!-- 6&#45;&gt;7 -->
<g id="slsvg_edge33" class="edge">
<title>6&#45;&gt;7</title>
<path fill="none" stroke="indigo" d="M943.05,-548.79C931.97,-541.39 919.67,-532.11 910,-522 903.69,-515.41 897.91,-507.35 893.1,-499.74"/>
<polygon fill="indigo" stroke="indigo" points="896.07,-497.89 887.91,-491.12 890.07,-501.49 896.07,-497.89"/>
</g>
<!-- 7&#45;&gt;6 -->
<g id="slsvg_edge34" class="edge">
<title>7&#45;&gt;6</title>
<path fill="none" stroke="green" d="M887.69,-491.34C893.17,-501.12 900.92,-513.12 910,-522 914.85,-526.74 917.37,-526.21 923,-530 928.88,-533.96 935.05,-538.32 940.95,-542.6"/>
<polygon fill="green" stroke="green" points="939.21,-545.66 949.34,-548.76 943.35,-540.02 939.21,-545.66"/>
</g>
<!-- 9 -->
<g id="slnode9" class="node">
<title>9</title>
<polygon fill="lightyellow" stroke="yellow" points="814,-346 772,-346 772,-322 814,-322 826,-334 814,-346"/>
<text text-anchor="middle" x="799" y="-330.3" font-family="Times,serif" font-size="14.00">#9 &gt;</text>
</g>
<!-- 7&#45;&gt;9 -->
<g id="slsvg_edge8" class="edge">
<title>7&#45;&gt;9</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M841.9,-465.47C825.54,-460.54 807.82,-451.95 798,-437 783.47,-414.9 786.24,-383.87 791.06,-361.85"/>
<polygon fill="black" stroke="black" points="841.27,-468.92 851.83,-468.08 843.05,-462.15 841.27,-468.92"/>
<polygon fill="black" stroke="black" points="794.46,-362.69 793.45,-352.14 787.66,-361.02 794.46,-362.69"/>
<text text-anchor="middle" x="828" y="-425.8" font-family="Times,serif" font-size="14.00">#7 cond</text>
</g>
<!-- 12 -->
<g id="slnode12" class="node">
<title>12</title>
<polygon fill="lightcyan" stroke="indigo" points="443.07,-352 323.65,-352 292.93,-316 412.35,-316 443.07,-352"/>
<text text-anchor="middle" x="368" y="-330.3" font-family="Times,serif" font-size="14.00">Imp #12</text>
</g>
<!-- 7&#45;&gt;12 -->
<g id="slsvg_edge24" class="edge">
<title>7&#45;&gt;12</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M841.56,-470.04C749.81,-464.76 516.24,-448.26 447,-414 422.2,-401.73 400.51,-378.6 386.16,-360.53"/>
<polygon fill="black" stroke="black" points="841.59,-473.55 851.77,-470.62 841.98,-466.56 841.59,-473.55"/>
<polygon fill="black" stroke="black" points="388.59,-357.94 379.73,-352.13 383.03,-362.2 388.59,-357.94"/>
<text text-anchor="middle" x="554" y="-425.8" font-family="Times,serif" font-size="14.00">#7 then</text>
</g>
<!-- 24 -->
<g id="slnode24" class="node">
<title>24</title>
<polygon fill="lightyellow" stroke="yellow" points="924,-346 850,-346 850,-322 924,-322 936,-334 924,-346"/>
<text text-anchor="middle" x="893" y="-330.3" font-family="Times,serif" font-size="14.00">#24 print</text>
</g>
<!-- 7&#45;&gt;24 -->
<g id="slsvg_edge32" class="edge">
<title>7&#45;&gt;24</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M881.78,-444.79C884.22,-420.93 887.75,-386.41 890.19,-362.47"/>
<polygon fill="black" stroke="black" points="878.28,-444.62 880.74,-454.93 885.24,-445.33 878.28,-444.62"/>
<polygon fill="black" stroke="black" points="893.7,-362.59 891.23,-352.29 886.73,-361.88 893.7,-362.59"/>
<text text-anchor="middle" x="910.5" y="-425.8" font-family="Times,serif" font-size="14.00">#7 else</text>
</g>
<!-- 9&#45;&gt;7 -->
<!-- 11 -->
<g id="slnode11" class="node">
<title>11</title>
<polygon fill="ivory" stroke="black" points="826,-244 718,-244 718,-208 826,-208 826,-244"/>
<text text-anchor="middle" x="772" y="-222.3" font-family="Times,serif" font-size="14.00">Number&lt;0&gt;</text>
</g>
<!-- 9&#45;&gt;11 -->
<g id="slsvg_edge6" class="edge">
<title>9&#45;&gt;11</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M770.65,-307.98C768.38,-304.85 766.42,-301.5 765,-298 759.4,-284.19 760.61,-267.68 763.46,-254.05"/>
<polygon fill="black" stroke="black" points="768.08,-310.37 777.2,-315.76 773.43,-305.86 768.08,-310.37"/>
<polygon fill="black" stroke="black" points="766.88,-254.84 765.88,-244.29 760.08,-253.15 766.88,-254.84"/>
<text text-anchor="middle" x="779" y="-286.8" font-family="Times,serif" font-size="14.00">9, 0</text>
</g>
<!-- 11&#45;&gt;9 -->
<!-- 12&#45;&gt;9 -->
<!-- 13 -->
<g id="slnode13" class="node">
<title>13</title>
<polygon fill="papayawhip" stroke="black" points="211.5,-244 76.5,-244 76.5,-208 217.5,-208 217.5,-238 211.5,-244"/>
<polyline fill="none" stroke="black" points="211.5,-244 211.5,-238 "/>
<polyline fill="none" stroke="black" points="217.5,-238 211.5,-238 "/>
<text text-anchor="middle" x="147" y="-222.3" font-family="Times,serif" font-size="14.00">Variable&lt;result&gt;</text>
</g>
<!-- 12&#45;&gt;13 -->
<g id="slsvg_edge14" class="edge">
<title>12&#45;&gt;13</title>
<path fill="none" stroke="indigo" d="M318.3,-315.94C289.57,-305.43 253.07,-290.93 222,-275 207.58,-267.61 192.4,-258.22 179.49,-249.72"/>
<polygon fill="indigo" stroke="indigo" points="181.21,-246.66 170.96,-244 177.32,-252.47 181.21,-246.66"/>
</g>
<!-- 18 -->
<g id="slnode18" class="node">
<title>18</title>
<polygon fill="papayawhip" stroke="black" points="209.5,-157 60.5,-157 60.5,-121 215.5,-121 215.5,-151 209.5,-157"/>
<polyline fill="none" stroke="black" points="209.5,-157 209.5,-151 "/>
<polyline fill="none" stroke="black" points="215.5,-151 209.5,-151 "/>
<text text-anchor="middle" x="138" y="-135.3" font-family="Times,serif" font-size="14.00">Variable&lt;number&gt;</text>
</g>
<!-- 13&#45;&gt;18 -->
<g id="slsvg_edge20" class="edge">
<title>13&#45;&gt;18</title>
<path fill="none" stroke="indigo" d="M145.18,-207.8C143.95,-196.16 142.29,-180.55 140.88,-167.24"/>
<polygon fill="indigo" stroke="indigo" points="144.35,-166.75 139.82,-157.18 137.39,-167.49 144.35,-166.75"/>
</g>
<!-- 14 -->
<g id="slnode14" class="node">
<title>14</title>
<polygon fill="lightyellow" stroke="yellow" points="561,-346 515,-346 515,-322 561,-322 573,-334 561,-346"/>
<text text-anchor="middle" x="544" y="-330.3" font-family="Times,serif" font-size="14.00">#14 *</text>
</g>
<!-- 14&#45;&gt;13 -->
<g id="slsvg_edge13" class="edge">
<title>14&#45;&gt;13</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M504.68,-314.82C449.05,-303.41 250.27,-285.48 222,-275 205.95,-269.05 189.75,-259.26 176.53,-250.07"/>
<polygon fill="black" stroke="black" points="504.16,-318.3 514.7,-317.29 505.83,-311.5 504.16,-318.3"/>
<polygon fill="black" stroke="black" points="178.48,-247.16 168.31,-244.17 174.39,-252.85 178.48,-247.16"/>
</g>
<!-- 16 -->
<g id="slnode16" class="node">
<title>16</title>
<polygon fill="ivory" stroke="black" points="659,-157 539,-157 539,-121 659,-121 659,-157"/>
<text text-anchor="middle" x="599" y="-135.3" font-family="Times,serif" font-size="14.00">Ident&lt;result&gt;</text>
</g>
<!-- 14&#45;&gt;16 -->
<g id="slsvg_edge10" class="edge">
<title>14&#45;&gt;16</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M511.59,-309.18C501.41,-299.79 491.43,-288.1 486,-275 473.24,-244.2 468.82,-228.57 486,-200 496.28,-182.9 513.26,-170.41 530.98,-161.4"/>
<polygon fill="black" stroke="black" points="509.48,-311.99 519.33,-315.9 514.07,-306.7 509.48,-311.99"/>
<polygon fill="black" stroke="black" points="532.73,-164.45 540.28,-157.01 529.74,-158.12 532.73,-164.45"/>
<text text-anchor="middle" x="504.5" y="-222.3" font-family="Times,serif" font-size="14.00">14, 0</text>
</g>
<!-- 17 -->
<g id="slnode17" class="node">
<title>17</title>
<polygon fill="ivory" stroke="black" points="666,-244 532,-244 532,-208 666,-208 666,-244"/>
<text text-anchor="middle" x="599" y="-222.3" font-family="Times,serif" font-size="14.00">Ident&lt;number&gt;</text>
</g>
<!-- 14&#45;&gt;17 -->
<g id="slsvg_edge12" class="edge">
<title>14&#45;&gt;17</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M557.49,-307C565.95,-290.7 576.82,-269.75 585.31,-253.38"/>
<polygon fill="black" stroke="black" points="554.34,-305.48 552.84,-315.97 560.55,-308.7 554.34,-305.48"/>
<polygon fill="black" stroke="black" points="588.5,-254.83 590,-244.34 582.29,-251.6 588.5,-254.83"/>
<text text-anchor="middle" x="587.5" y="-286.8" font-family="Times,serif" font-size="14.00">14, 1</text>
</g>
<!-- 16&#45;&gt;14 -->
<!-- 17&#45;&gt;16 -->
<!-- 23 -->
<g id="slnode23" class="node">
<title>23</title>
<polygon fill="ivory" stroke="black" points="129,-84 75,-84 75,-48 129,-48 129,-84"/>
<text text-anchor="middle" x="102" y="-62.3" font-family="Times,serif" font-size="14.00">Loop</text>
</g>
<!-- 18&#45;&gt;23 -->
<g id="slsvg_edge21" class="edge">
<title>18&#45;&gt;23</title>
<path fill="none" stroke="indigo" d="M129.29,-120.81C125.08,-112.53 119.95,-102.41 115.28,-93.19"/>
<polygon fill="indigo" stroke="indigo" points="118.28,-91.37 110.63,-84.03 112.04,-94.53 118.28,-91.37"/>
</g>
<!-- 19 -->
<g id="slnode19" class="node">
<title>19</title>
<polygon fill="lightyellow" stroke="yellow" points="308,-238 264,-238 264,-214 308,-214 320,-226 308,-238"/>
<text text-anchor="middle" x="292" y="-222.3" font-family="Times,serif" font-size="14.00">#19 &#45;</text>
</g>
<!-- 19&#45;&gt;18 -->
<g id="slsvg_edge19" class="edge">
<title>19&#45;&gt;18</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M263.24,-202.1C262.16,-201.38 261.08,-200.67 260,-200 236.89,-185.51 209.78,-171.87 186.99,-161.27"/>
<polygon fill="black" stroke="black" points="261.28,-205 271.45,-207.95 265.34,-199.3 261.28,-205"/>
<polygon fill="black" stroke="black" points="188.39,-158.06 177.84,-157.07 185.47,-164.42 188.39,-158.06"/>
</g>
<!-- 21 -->
<g id="slnode21" class="node">
<title>21</title>
<polygon fill="ivory" stroke="black" points="428,-84 294,-84 294,-48 428,-48 428,-84"/>
<text text-anchor="middle" x="361" y="-62.3" font-family="Times,serif" font-size="14.00">Ident&lt;number&gt;</text>
</g>
<!-- 19&#45;&gt;21 -->
<g id="slsvg_edge16" class="edge">
<title>19&#45;&gt;21</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M273.75,-199.24C259.26,-175.32 244.01,-139.51 261,-113 267.44,-102.94 276.7,-95.06 287.01,-88.88"/>
<polygon fill="black" stroke="black" points="270.87,-201.23 279.2,-207.78 276.77,-197.47 270.87,-201.23"/>
<polygon fill="black" stroke="black" points="288.76,-91.91 295.89,-84.08 285.43,-85.76 288.76,-91.91"/>
<text text-anchor="middle" x="279.5" y="-135.3" font-family="Times,serif" font-size="14.00">19, 0</text>
</g>
<!-- 22 -->
<g id="slnode22" class="node">
<title>22</title>
<polygon fill="ivory" stroke="black" points="415,-157 307,-157 307,-121 415,-121 415,-157"/>
<text text-anchor="middle" x="361" y="-135.3" font-family="Times,serif" font-size="14.00">Number&lt;1&gt;</text>
</g>
<!-- 19&#45;&gt;22 -->
<g id="slsvg_edge18" class="edge">
<title>19&#45;&gt;22</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M312.54,-199.69C321.42,-188.76 331.77,-176 340.63,-165.1"/>
<polygon fill="black" stroke="black" points="309.55,-197.83 305.96,-207.8 314.98,-202.24 309.55,-197.83"/>
<polygon fill="black" stroke="black" points="343.47,-167.15 347.06,-157.18 338.04,-162.73 343.47,-167.15"/>
<text text-anchor="middle" x="348.5" y="-178.8" font-family="Times,serif" font-size="14.00">19, 1</text>
</g>
<!-- 21&#45;&gt;19 -->
<!-- 22&#45;&gt;21 -->
<!-- 23&#45;&gt;12 -->
<g id="slsvg_edge22" class="edge">
<title>23&#45;&gt;12</title>
<path fill="none" stroke="green" d="M75.79,-84.08C66.46,-91.7 57.02,-101.55 52,-113 22.93,-179.25 18.3,-222.42 68,-275 98.21,-306.96 215.13,-321.85 293.77,-328.38"/>
<polygon fill="green" stroke="green" points="293.87,-331.89 304.12,-329.2 294.43,-324.92 293.87,-331.89"/>
</g>
<!-- 24&#45;&gt;12 -->
<!-- 26 -->
<g id="slnode26" class="node">
<title>26</title>
<polygon fill="ivory" stroke="black" points="1040,-84 882,-84 882,-48 1040,-48 1040,-84"/>
<text text-anchor="middle" x="961" y="-62.3" font-family="Times,serif" font-size="14.00">String&lt;Factorial: &gt;</text>
</g>
<!-- 24&#45;&gt;26 -->
<g id="slsvg_edge26" class="edge">
<title>24&#45;&gt;26</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M882.12,-306.48C870.63,-275.02 855.41,-221.02 865,-175 871.13,-145.58 872.71,-136.05 892,-113 899.5,-104.03 909.19,-96.13 918.92,-89.51"/>
<polygon fill="black" stroke="black" points="878.86,-307.76 885.68,-315.87 885.4,-305.28 878.86,-307.76"/>
<polygon fill="black" stroke="black" points="920.91,-92.39 927.43,-84.03 917.12,-86.5 920.91,-92.39"/>
<text text-anchor="middle" x="883.5" y="-178.8" font-family="Times,serif" font-size="14.00">24, 0</text>
</g>
<!-- 27 -->
<g id="slnode27" class="node">
<title>27</title>
<polygon fill="ivory" stroke="black" points="1021,-157 901,-157 901,-121 1021,-121 1021,-157"/>
<text text-anchor="middle" x="961" y="-135.3" font-family="Times,serif" font-size="14.00">Ident&lt;result&gt;</text>
</g>
<!-- 24&#45;&gt;27 -->
<g id="slsvg_edge28" class="edge">
<title>24&#45;&gt;27</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M887.9,-305.48C884.06,-277.59 881.73,-233.83 897,-200 898.1,-197.56 917.27,-179.73 934.34,-164.14"/>
<polygon fill="black" stroke="black" points="884.49,-306.34 889.47,-315.69 891.41,-305.28 884.49,-306.34"/>
<polygon fill="black" stroke="black" points="936.93,-166.51 941.96,-157.19 932.21,-161.34 936.93,-166.51"/>
<text text-anchor="middle" x="915.5" y="-222.3" font-family="Times,serif" font-size="14.00">24, 1</text>
</g>
<!-- 28 -->
<g id="slnode28" class="node">
<title>28</title>
<polygon fill="ivory" stroke="black" points="1035,-244 943,-244 943,-208 1035,-208 1035,-244"/>
<text text-anchor="middle" x="989" y="-222.3" font-family="Times,serif" font-size="14.00">Ident&lt;nl&gt;</text>
</g>
<!-- 24&#45;&gt;28 -->
<g id="slsvg_edge30" class="edge">
<title>24&#45;&gt;28</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M915.35,-308.32C930.63,-291.46 950.8,-269.17 966.18,-252.2"/>
<polygon fill="black" stroke="black" points="912.54,-306.21 908.42,-315.97 917.73,-310.91 912.54,-306.21"/>
<polygon fill="black" stroke="black" points="969.18,-254.1 973.3,-244.34 963.99,-249.4 969.18,-254.1"/>
<text text-anchor="middle" x="956.5" y="-286.8" font-family="Times,serif" font-size="14.00">24, 2</text>
</g>
<!-- 26&#45;&gt;24 -->
<!-- 27&#45;&gt;26 -->
<!-- 28&#45;&gt;27 -->
</g>
</svg>
<pre id="code">{
result: 1
number: 20
{
    (?  (> 0)
        {
            result:: (* result number)
            number:: (- number 1)
            @
        }
        (print "Factorial: " result nl))
}
}
</pre><div id="debug" style="border: 1px solid black;"></div><script>const srcMap = {
  "slnode1": { line: 1, column: 1, tok: "Token::IBegin" },
  "slnode2": { line: 2, column: 1, tok: "Token::Name" },
  "slnode3": { line: 2, column: 9, tok: "Token::Number" },
  "slnode4": { line: 3, column: 1, tok: "Token::Name" },
  "slnode5": { line: 3, column: 9, tok: "Token::Number" },
  "slnode6": { line: 4, column: 1, tok: "Token::IBegin" },
  "slnode7": { line: 5, column: 5, tok: "Token::Begin" },
  "slnode9": { line: 5, column: 9, tok: "Token::Begin" },
  "slnode11": { line: 5, column: 12, tok: "Token::Number" },
  "slnode12": { line: 6, column: 9, tok: "Token::IBegin" },
  "slnode13": { line: 7, column: 13, tok: "Token::KnownName" },
  "slnode14": { line: 7, column: 22, tok: "Token::Begin" },
  "slnode16": { line: 7, column: 25, tok: "Token::Identifier" },
  "slnode17": { line: 7, column: 32, tok: "Token::Identifier" },
  "slnode18": { line: 8, column: 13, tok: "Token::KnownName" },
  "slnode19": { line: 8, column: 22, tok: "Token::Begin" },
  "slnode21": { line: 8, column: 25, tok: "Token::Identifier" },
  "slnode22": { line: 8, column: 32, tok: "Token::Number" },
  "slnode23": { line: 9, column: 13, tok: "Token::Loop" },
  "slnode24": { line: 11, column: 9, tok: "Token::Begin" },
  "slnode26": { line: 11, column: 15, tok: "Token::String" },
  "slnode27": { line: 11, column: 30, tok: "Token::Identifier" },
  "slnode28": { line: 11, column: 37, tok: "Token::Identifier" }
};

    window.onload = () => {
        for(const k in srcMap) {

            const node = document.getElementById(k);
            if(node) {
            node.onmouseenter = ()=>{
                //console.log(k);

                highlightPreLine('code', srcMap[k].line);
                document.getElementById('debug').innerHTML=JSON.stringify( srcMap[k], null, 4);

                const polygon = node.querySelector("polygon");

                // Save the original stroke
                const originalStroke = polygon.getAttribute("stroke");

                // Set a new stroke color
                polygon.setAttribute("stroke", "red");

                node.onmouseleave = ()=>{
                    polygon.setAttribute("stroke", originalStroke);
                };

            };
            } else {
           console.log("Not found",k);

            }
        }
        //




const graph = document.getElementById("slsvg");
const svg = graph.closest("svg");

let viewBox = { x: 0, y: 0, w: 800, h: 600 };  // Match initial viewBox
let isPanning = false;
let start = { x: 0, y: 0 };

svg.setAttribute("viewBox", `${viewBox.x} ${viewBox.y} ${viewBox.w} ${viewBox.h}`);
svg.style.width="100%";
svg.style.height="50%";
svg.style.border="1px solid black";

// Handle mouse drag
svg.addEventListener("mousedown", (e) => {
  isPanning = true;
  start = { x: e.clientX, y: e.clientY };
});

svg.addEventListener("mousemove", (e) => {
  if (!isPanning) return;
  const dx = (e.clientX - start.x) * viewBox.w / svg.clientWidth;
  const dy = (e.clientY - start.y) * viewBox.h / svg.clientHeight;
  viewBox.x -= dx;
  viewBox.y -= dy;
  svg.setAttribute("viewBox", `${viewBox.x} ${viewBox.y} ${viewBox.w} ${viewBox.h}`);
  start = { x: e.clientX, y: e.clientY };
});

svg.addEventListener("mouseup", () => isPanning = false);
svg.addEventListener("mouseleave", () => isPanning = false);

// Handle zoom
svg.addEventListener("wheel", (e) => {
  e.preventDefault();
  const zoom = e.deltaY > 0 ? 1.1 : 0.9;
  const mx = e.offsetX * viewBox.w / svg.clientWidth + viewBox.x;
  const my = e.offsetY * viewBox.h / svg.clientHeight + viewBox.y;

  viewBox.w *= zoom;
  viewBox.h *= zoom;
  viewBox.x = mx - (mx - viewBox.x) * zoom;
  viewBox.y = my - (my - viewBox.y) * zoom;

  svg.setAttribute("viewBox", `${viewBox.x} ${viewBox.y} ${viewBox.w} ${viewBox.h}`);
});

const lines = document.getElementById('code').textContent.split('\n');
function highlightPreLine(preId, lineNumber) {
  const pre = document.getElementById(preId);


  pre.innerHTML = ''; // Clear content to rebuild with spans

  lines.forEach((line, i) => {
    const span = document.createElement('span');
    span.style.display = 'block';
    span.style.whiteSpace = 'pre';

    if (i === lineNumber - 1) {
      span.style.background = 'yellow';
    }

    span.textContent = line+"\n";
    pre.appendChild(span);
  });
}
};
</script></body></html>
