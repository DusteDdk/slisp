<html><head><title>explore wasmrepl/html/samples/fac.slisp</title></head><body><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="1551pt" height="600pt"
 viewBox="0.00 0.00 1551.00 600.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="slsvg" class="graph" transform="scale(1 1) rotate(0) translate(4 596)">
<title>G</title>
<polygon fill="#b2dfee" stroke="transparent" points="-4,4 -4,-596 1547,-596 1547,4 -4,4"/>
<g id="slsvg" class="cluster">
<title>cluster_1</title>
<polygon fill="mintcream" stroke="indigo" points="8,-8 8,-584 1535,-584 1535,-8 8,-8"/>
<text text-anchor="middle" x="771.5" y="-568.8" font-family="Times,serif" font-size="14.00">Imp #1</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_6</title>
<polygon fill="mintcream" stroke="indigo" points="16,-16 16,-553 1221,-553 1221,-16 16,-16"/>
<text text-anchor="middle" x="618.5" y="-537.8" font-family="Times,serif" font-size="14.00">Imp #6</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_7</title>
<polygon fill="lightgrey" stroke="yellow" points="24,-24 24,-522 1071,-522 1071,-24 24,-24"/>
<text text-anchor="middle" x="547.5" y="-506.8" font-family="Times,serif" font-size="14.00">#7</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_9</title>
<polygon fill="lightgrey" stroke="yellow" points="710,-200 710,-383 834,-383 834,-200 710,-200"/>
<text text-anchor="middle" x="772" y="-367.8" font-family="Times,serif" font-size="14.00">#9</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_12</title>
<polygon fill="mintcream" stroke="indigo" points="32,-32 32,-414 702,-414 702,-32 32,-32"/>
<text text-anchor="middle" x="367" y="-398.8" font-family="Times,serif" font-size="14.00">Imp #12</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_14</title>
<polygon fill="lightgrey" stroke="yellow" points="451,-113 451,-383 694,-383 694,-113 451,-113"/>
<text text-anchor="middle" x="572.5" y="-367.8" font-family="Times,serif" font-size="14.00">#14</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_19</title>
<polygon fill="lightgrey" stroke="yellow" points="226,-40 226,-275 443,-275 443,-40 226,-40"/>
<text text-anchor="middle" x="334.5" y="-259.8" font-family="Times,serif" font-size="14.00">#19</text>
</g>
<g id="slsvg" class="cluster">
<title>cluster_24</title>
<polygon fill="lightgrey" stroke="yellow" points="842,-40 842,-383 1063,-383 1063,-40 842,-40"/>
<text text-anchor="middle" x="952.5" y="-367.8" font-family="Times,serif" font-size="14.00">#24</text>
</g>
<!-- 1 -->
<g id="slnode1" class="node">
<title>1</title>
<polygon fill="lightgreen" stroke="blue" points="1228.53,-220.44 1285,-208 1341.47,-220.44 1341.42,-240.56 1228.58,-240.56 1228.53,-220.44"/>
<text text-anchor="middle" x="1285" y="-222.3" font-family="Times,serif" font-size="14.00">Imp #1</text>
</g>
<!-- 2 -->
<g id="slnode2" class="node">
<title>2</title>
<polygon fill="papayawhip" stroke="black" points="1364.5,-157 1229.5,-157 1229.5,-121 1370.5,-121 1370.5,-151 1364.5,-157"/>
<polyline fill="none" stroke="black" points="1364.5,-157 1364.5,-151 "/>
<polyline fill="none" stroke="black" points="1370.5,-151 1364.5,-151 "/>
<text text-anchor="middle" x="1300" y="-135.3" font-family="Times,serif" font-size="14.00">Variable&lt;result&gt;</text>
</g>
<!-- 1&#45;&gt;2 -->
<g id="slsvg_edge2" class="edge">
<title>1&#45;&gt;2</title>
<path fill="none" stroke="indigo" d="M1287.89,-208.61C1289.97,-196.85 1292.81,-180.73 1295.22,-167.07"/>
<polygon fill="indigo" stroke="indigo" points="1298.67,-167.67 1296.96,-157.21 1291.78,-166.45 1298.67,-167.67"/>
</g>
<!-- 4 -->
<g id="slnode4" class="node">
<title>4</title>
<polygon fill="papayawhip" stroke="black" points="1461.5,-84 1312.5,-84 1312.5,-48 1467.5,-48 1467.5,-78 1461.5,-84"/>
<polyline fill="none" stroke="black" points="1461.5,-84 1461.5,-78 "/>
<polyline fill="none" stroke="black" points="1467.5,-78 1461.5,-78 "/>
<text text-anchor="middle" x="1390" y="-62.3" font-family="Times,serif" font-size="14.00">Variable&lt;number&gt;</text>
</g>
<!-- 2&#45;&gt;4 -->
<g id="slsvg_edge4" class="edge">
<title>2&#45;&gt;4</title>
<path fill="none" stroke="indigo" d="M1321.79,-120.81C1333.39,-111.66 1347.84,-100.26 1360.44,-90.32"/>
<polygon fill="indigo" stroke="indigo" points="1362.73,-92.97 1368.41,-84.03 1358.4,-87.47 1362.73,-92.97"/>
</g>
<!-- 3 -->
<g id="slnode3" class="node">
<title>3</title>
<polygon fill="ivory" stroke="black" points="1467,-244 1359,-244 1359,-208 1467,-208 1467,-244"/>
<text text-anchor="middle" x="1413" y="-222.3" font-family="Times,serif" font-size="14.00">Number&lt;1&gt;</text>
</g>
<!-- 3&#45;&gt;2 -->
<g id="slsvg_edge1" class="edge">
<title>3&#45;&gt;2</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1381.91,-201.62C1366.14,-189.75 1347.02,-175.37 1331.22,-163.49"/>
<polygon fill="black" stroke="black" points="1380.04,-204.58 1390.13,-207.8 1384.25,-198.99 1380.04,-204.58"/>
<polygon fill="black" stroke="black" points="1332.93,-160.39 1322.83,-157.18 1328.72,-165.98 1332.93,-160.39"/>
</g>
<!-- 6 -->
<g id="slnode6" class="node">
<title>6</title>
<polygon fill="lightcyan" stroke="indigo" points="1212.91,-352 1106.47,-352 1079.09,-316 1185.53,-316 1212.91,-352"/>
<text text-anchor="middle" x="1146" y="-330.3" font-family="Times,serif" font-size="14.00">Imp #6</text>
</g>
<!-- 4&#45;&gt;6 -->
<g id="slsvg_edge34" class="edge">
<title>4&#45;&gt;6</title>
<path fill="none" stroke="indigo" d="M1387.79,-84.13C1386.21,-103.47 1386.46,-135.1 1401,-157 1422.25,-189.01 1456.74,-166.75 1476,-200 1492.71,-228.84 1497.43,-249.47 1476,-275 1442.44,-314.97 1293.77,-327.41 1207.86,-331.27"/>
<polygon fill="indigo" stroke="indigo" points="1207.55,-327.78 1197.71,-331.7 1207.85,-334.77 1207.55,-327.78"/>
</g>
<!-- 5 -->
<g id="slnode5" class="node">
<title>5</title>
<polygon fill="ivory" stroke="black" points="1526.5,-157 1409.5,-157 1409.5,-121 1526.5,-121 1526.5,-157"/>
<text text-anchor="middle" x="1468" y="-135.3" font-family="Times,serif" font-size="14.00">Number&lt;20&gt;</text>
</g>
<!-- 5&#45;&gt;4 -->
<g id="slsvg_edge3" class="edge">
<title>5&#45;&gt;4</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1441.57,-113.94C1433.39,-106.5 1424.39,-98.3 1416.22,-90.87"/>
<polygon fill="black" stroke="black" points="1439.37,-116.67 1449.12,-120.81 1444.08,-111.49 1439.37,-116.67"/>
<polygon fill="black" stroke="black" points="1418.46,-88.17 1408.71,-84.03 1413.75,-93.35 1418.46,-88.17"/>
</g>
<!-- 6&#45;&gt;1 -->
<g id="slsvg_edge35" class="edge">
<title>6&#45;&gt;1</title>
<path fill="none" stroke="green" d="M1168.33,-315.97C1193.12,-297.06 1233.07,-266.6 1259.19,-246.69"/>
<polygon fill="green" stroke="green" points="1261.31,-249.47 1267.14,-240.62 1257.07,-243.9 1261.31,-249.47"/>
</g>
<!-- 7 -->
<g id="slnode7" class="node">
<title>7</title>
<polygon fill="lightyellow" stroke="yellow" points="839,-485 797,-485 797,-461 839,-461 851,-473 839,-485"/>
<text text-anchor="middle" x="824" y="-469.3" font-family="Times,serif" font-size="14.00">#7 ?</text>
</g>
<!-- 7&#45;&gt;6 -->
<g id="slsvg_edge33" class="edge">
<title>7&#45;&gt;6</title>
<path fill="none" stroke="indigo" stroke-dasharray="5,2" d="M861.25,-469.42C911,-464.62 1000.56,-451.15 1067,-414 1090.86,-400.66 1112.39,-378.06 1126.93,-360.45"/>
<polygon fill="indigo" stroke="indigo" points="860.91,-465.94 851.26,-470.32 861.54,-472.91 860.91,-465.94"/>
<polygon fill="indigo" stroke="indigo" points="1129.96,-362.25 1133.48,-352.26 1124.5,-357.88 1129.96,-362.25"/>
</g>
<!-- 9 -->
<g id="slnode9" class="node">
<title>9</title>
<polygon fill="lightyellow" stroke="yellow" points="773,-346 731,-346 731,-322 773,-322 785,-334 773,-346"/>
<text text-anchor="middle" x="758" y="-330.3" font-family="Times,serif" font-size="14.00">#9 &gt;</text>
</g>
<!-- 7&#45;&gt;9 -->
<g id="slsvg_edge8" class="edge">
<title>7&#45;&gt;9</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M787.49,-462.16C774.97,-456.85 762.28,-448.86 755,-437 741.3,-414.68 744.42,-384.13 749.5,-362.3"/>
<polygon fill="black" stroke="black" points="786.36,-465.48 796.95,-465.72 788.82,-458.92 786.36,-465.48"/>
<polygon fill="black" stroke="black" points="752.96,-362.91 752.09,-352.35 746.19,-361.15 752.96,-362.91"/>
<text text-anchor="middle" x="785" y="-425.8" font-family="Times,serif" font-size="14.00">#7 cond</text>
</g>
<!-- 12 -->
<g id="slnode12" class="node">
<title>12</title>
<polygon fill="lightcyan" stroke="indigo" points="443.07,-352 323.65,-352 292.93,-316 412.35,-316 443.07,-352"/>
<text text-anchor="middle" x="368" y="-330.3" font-family="Times,serif" font-size="14.00">Imp #12</text>
</g>
<!-- 7&#45;&gt;12 -->
<g id="slsvg_edge24" class="edge">
<title>7&#45;&gt;12</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M786.79,-469.23C703.79,-462.58 506.2,-444 447,-414 422.32,-401.49 400.61,-378.39 386.23,-360.39"/>
<polygon fill="black" stroke="black" points="786.54,-472.72 796.79,-470.02 787.09,-465.74 786.54,-472.72"/>
<polygon fill="black" stroke="black" points="388.66,-357.81 379.78,-352.03 383.12,-362.09 388.66,-357.81"/>
<text text-anchor="middle" x="554" y="-425.8" font-family="Times,serif" font-size="14.00">#7 then</text>
</g>
<!-- 24 -->
<g id="slnode24" class="node">
<title>24</title>
<polygon fill="lightyellow" stroke="yellow" points="924,-346 850,-346 850,-322 924,-322 936,-334 924,-346"/>
<text text-anchor="middle" x="893" y="-330.3" font-family="Times,serif" font-size="14.00">#24 print</text>
</g>
<!-- 7&#45;&gt;24 -->
<g id="slsvg_edge32" class="edge">
<title>7&#45;&gt;24</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M825.95,-444.6C827.13,-437.07 829.01,-429.04 832,-422 833.74,-417.91 835.4,-417.6 838,-414 850.77,-396.34 864.8,-376.17 875.49,-360.63"/>
<polygon fill="black" stroke="black" points="822.45,-444.42 824.71,-454.77 829.4,-445.27 822.45,-444.42"/>
<polygon fill="black" stroke="black" points="878.59,-362.3 881.37,-352.07 872.82,-358.34 878.59,-362.3"/>
<text text-anchor="middle" x="859.5" y="-425.8" font-family="Times,serif" font-size="14.00">#7 else</text>
</g>
<!-- 9&#45;&gt;7 -->
<!-- 11 -->
<g id="slnode11" class="node">
<title>11</title>
<polygon fill="ivory" stroke="black" points="826,-244 718,-244 718,-208 826,-208 826,-244"/>
<text text-anchor="middle" x="772" y="-222.3" font-family="Times,serif" font-size="14.00">Number&lt;0&gt;</text>
</g>
<!-- 9&#45;&gt;11 -->
<g id="slsvg_edge6" class="edge">
<title>9&#45;&gt;11</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M746.19,-306.25C744.2,-298.75 743.27,-290.57 745,-283 747.32,-272.85 751.73,-262.39 756.32,-253.31"/>
<polygon fill="black" stroke="black" points="742.93,-307.55 749.4,-315.94 749.57,-305.34 742.93,-307.55"/>
<polygon fill="black" stroke="black" points="759.45,-254.87 761.09,-244.4 753.28,-251.56 759.45,-254.87"/>
<text text-anchor="middle" x="759" y="-286.8" font-family="Times,serif" font-size="14.00">9, 0</text>
</g>
<!-- 11&#45;&gt;9 -->
<!-- 12&#45;&gt;9 -->
<!-- 13 -->
<g id="slnode13" class="node">
<title>13</title>
<polygon fill="papayawhip" stroke="black" points="211.5,-244 76.5,-244 76.5,-208 217.5,-208 217.5,-238 211.5,-244"/>
<polyline fill="none" stroke="black" points="211.5,-244 211.5,-238 "/>
<polyline fill="none" stroke="black" points="217.5,-238 211.5,-238 "/>
<text text-anchor="middle" x="147" y="-222.3" font-family="Times,serif" font-size="14.00">Variable&lt;result&gt;</text>
</g>
<!-- 12&#45;&gt;13 -->
<g id="slsvg_edge14" class="edge">
<title>12&#45;&gt;13</title>
<path fill="none" stroke="indigo" d="M318.3,-315.94C289.57,-305.43 253.07,-290.93 222,-275 207.58,-267.61 192.4,-258.22 179.49,-249.72"/>
<polygon fill="indigo" stroke="indigo" points="181.21,-246.66 170.96,-244 177.32,-252.47 181.21,-246.66"/>
</g>
<!-- 18 -->
<g id="slnode18" class="node">
<title>18</title>
<polygon fill="papayawhip" stroke="black" points="209.5,-157 60.5,-157 60.5,-121 215.5,-121 215.5,-151 209.5,-157"/>
<polyline fill="none" stroke="black" points="209.5,-157 209.5,-151 "/>
<polyline fill="none" stroke="black" points="215.5,-151 209.5,-151 "/>
<text text-anchor="middle" x="138" y="-135.3" font-family="Times,serif" font-size="14.00">Variable&lt;number&gt;</text>
</g>
<!-- 13&#45;&gt;18 -->
<g id="slsvg_edge20" class="edge">
<title>13&#45;&gt;18</title>
<path fill="none" stroke="indigo" d="M145.18,-207.8C143.95,-196.16 142.29,-180.55 140.88,-167.24"/>
<polygon fill="indigo" stroke="indigo" points="144.35,-166.75 139.82,-157.18 137.39,-167.49 144.35,-166.75"/>
</g>
<!-- 14 -->
<g id="slnode14" class="node">
<title>14</title>
<polygon fill="lightyellow" stroke="yellow" points="537,-346 491,-346 491,-322 537,-322 549,-334 537,-346"/>
<text text-anchor="middle" x="520" y="-330.3" font-family="Times,serif" font-size="14.00">#14 *</text>
</g>
<!-- 14&#45;&gt;13 -->
<g id="slsvg_edge13" class="edge">
<title>14&#45;&gt;13</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M480.79,-314.8C428.67,-303.69 247.8,-284.75 222,-275 205.99,-268.95 189.79,-259.15 176.57,-249.98"/>
<polygon fill="black" stroke="black" points="480.14,-318.25 490.7,-317.31 481.87,-311.46 480.14,-318.25"/>
<polygon fill="black" stroke="black" points="178.51,-247.06 168.34,-244.09 174.44,-252.75 178.51,-247.06"/>
</g>
<!-- 16 -->
<g id="slnode16" class="node">
<title>16</title>
<polygon fill="ivory" stroke="black" points="659,-157 539,-157 539,-121 659,-121 659,-157"/>
<text text-anchor="middle" x="599" y="-135.3" font-family="Times,serif" font-size="14.00">Ident&lt;result&gt;</text>
</g>
<!-- 14&#45;&gt;16 -->
<g id="slsvg_edge10" class="edge">
<title>14&#45;&gt;16</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M501.11,-307.49C495.04,-297.82 489.09,-286.38 486,-275 477.27,-242.83 468.82,-228.57 486,-200 496.28,-182.9 513.26,-170.41 530.98,-161.4"/>
<polygon fill="black" stroke="black" points="498.19,-309.43 506.64,-315.82 504.03,-305.56 498.19,-309.43"/>
<polygon fill="black" stroke="black" points="532.73,-164.45 540.28,-157.01 529.74,-158.12 532.73,-164.45"/>
<text text-anchor="middle" x="504.5" y="-222.3" font-family="Times,serif" font-size="14.00">14, 0</text>
</g>
<!-- 17 -->
<g id="slnode17" class="node">
<title>17</title>
<polygon fill="ivory" stroke="black" points="666,-244 532,-244 532,-208 666,-208 666,-244"/>
<text text-anchor="middle" x="599" y="-222.3" font-family="Times,serif" font-size="14.00">Ident&lt;number&gt;</text>
</g>
<!-- 14&#45;&gt;17 -->
<g id="slsvg_edge12" class="edge">
<title>14&#45;&gt;17</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M538.79,-307.79C551.21,-291.12 567.45,-269.33 579.93,-252.59"/>
<polygon fill="black" stroke="black" points="535.86,-305.86 532.69,-315.97 541.47,-310.04 535.86,-305.86"/>
<polygon fill="black" stroke="black" points="582.91,-254.45 586.08,-244.34 577.29,-250.27 582.91,-254.45"/>
<text text-anchor="middle" x="576.5" y="-286.8" font-family="Times,serif" font-size="14.00">14, 1</text>
</g>
<!-- 16&#45;&gt;14 -->
<!-- 17&#45;&gt;16 -->
<!-- 23 -->
<g id="slnode23" class="node">
<title>23</title>
<polygon fill="ivory" stroke="black" points="129,-84 75,-84 75,-48 129,-48 129,-84"/>
<text text-anchor="middle" x="102" y="-62.3" font-family="Times,serif" font-size="14.00">Loop</text>
</g>
<!-- 18&#45;&gt;23 -->
<g id="slsvg_edge21" class="edge">
<title>18&#45;&gt;23</title>
<path fill="none" stroke="indigo" d="M129.29,-120.81C125.08,-112.53 119.95,-102.41 115.28,-93.19"/>
<polygon fill="indigo" stroke="indigo" points="118.28,-91.37 110.63,-84.03 112.04,-94.53 118.28,-91.37"/>
</g>
<!-- 19 -->
<g id="slnode19" class="node">
<title>19</title>
<polygon fill="lightyellow" stroke="yellow" points="328,-238 284,-238 284,-214 328,-214 340,-226 328,-238"/>
<text text-anchor="middle" x="312" y="-222.3" font-family="Times,serif" font-size="14.00">#19 &#45;</text>
</g>
<!-- 19&#45;&gt;18 -->
<g id="slsvg_edge19" class="edge">
<title>19&#45;&gt;18</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M283.98,-202.23C282.66,-201.44 281.33,-200.69 280,-200 266.4,-192.94 261.33,-195.43 247,-190 224.98,-181.66 201.15,-170.93 181.4,-161.55"/>
<polygon fill="black" stroke="black" points="282.21,-205.25 292.46,-207.93 286.11,-199.44 282.21,-205.25"/>
<polygon fill="black" stroke="black" points="182.87,-158.38 172.34,-157.21 179.85,-164.69 182.87,-158.38"/>
</g>
<!-- 21 -->
<g id="slnode21" class="node">
<title>21</title>
<polygon fill="ivory" stroke="black" points="428,-84 294,-84 294,-48 428,-48 428,-84"/>
<text text-anchor="middle" x="361" y="-62.3" font-family="Times,serif" font-size="14.00">Ident&lt;number&gt;</text>
</g>
<!-- 19&#45;&gt;21 -->
<g id="slsvg_edge16" class="edge">
<title>19&#45;&gt;21</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M286.99,-200.48C266.25,-177.07 242.88,-141.28 261,-113 267.44,-102.94 276.7,-95.06 287.01,-88.88"/>
<polygon fill="black" stroke="black" points="284.5,-202.94 293.86,-207.91 289.64,-198.19 284.5,-202.94"/>
<polygon fill="black" stroke="black" points="288.76,-91.91 295.89,-84.08 285.43,-85.76 288.76,-91.91"/>
<text text-anchor="middle" x="279.5" y="-135.3" font-family="Times,serif" font-size="14.00">19, 0</text>
</g>
<!-- 22 -->
<g id="slnode22" class="node">
<title>22</title>
<polygon fill="ivory" stroke="black" points="415,-157 307,-157 307,-121 415,-121 415,-157"/>
<text text-anchor="middle" x="361" y="-135.3" font-family="Times,serif" font-size="14.00">Number&lt;1&gt;</text>
</g>
<!-- 19&#45;&gt;22 -->
<g id="slsvg_edge18" class="edge">
<title>19&#45;&gt;22</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M327.04,-198.91C333.09,-188.42 340.04,-176.36 346.08,-165.89"/>
<polygon fill="black" stroke="black" points="323.88,-197.39 321.92,-207.8 329.94,-200.88 323.88,-197.39"/>
<polygon fill="black" stroke="black" points="349.14,-167.59 351.1,-157.18 343.07,-164.09 349.14,-167.59"/>
<text text-anchor="middle" x="358.5" y="-178.8" font-family="Times,serif" font-size="14.00">19, 1</text>
</g>
<!-- 21&#45;&gt;19 -->
<!-- 22&#45;&gt;21 -->
<!-- 23&#45;&gt;12 -->
<g id="slsvg_edge22" class="edge">
<title>23&#45;&gt;12</title>
<path fill="none" stroke="green" d="M75.01,-84.19C65.58,-91.77 56.09,-101.56 51,-113 21.6,-179.11 17.28,-222.44 67,-275 97.32,-307.05 214.63,-321.92 293.53,-328.41"/>
<polygon fill="green" stroke="green" points="293.67,-331.93 303.91,-329.24 294.22,-324.95 293.67,-331.93"/>
</g>
<!-- 24&#45;&gt;12 -->
<!-- 26 -->
<g id="slnode26" class="node">
<title>26</title>
<polygon fill="ivory" stroke="black" points="1040,-84 882,-84 882,-48 1040,-48 1040,-84"/>
<text text-anchor="middle" x="961" y="-62.3" font-family="Times,serif" font-size="14.00">String&lt;Factorial: &gt;</text>
</g>
<!-- 24&#45;&gt;26 -->
<g id="slsvg_edge26" class="edge">
<title>24&#45;&gt;26</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M882.35,-306.08C871.29,-274.56 856.78,-220.84 866,-175 871.89,-145.71 872.98,-136.05 892,-113 899.37,-104.07 908.92,-96.21 918.56,-89.63"/>
<polygon fill="black" stroke="black" points="879.21,-307.68 885.94,-315.87 885.79,-305.28 879.21,-307.68"/>
<polygon fill="black" stroke="black" points="920.49,-92.54 926.99,-84.18 916.69,-86.66 920.49,-92.54"/>
<text text-anchor="middle" x="884.5" y="-178.8" font-family="Times,serif" font-size="14.00">24, 0</text>
</g>
<!-- 27 -->
<g id="slnode27" class="node">
<title>27</title>
<polygon fill="ivory" stroke="black" points="1021,-157 901,-157 901,-121 1021,-121 1021,-157"/>
<text text-anchor="middle" x="961" y="-135.3" font-family="Times,serif" font-size="14.00">Ident&lt;result&gt;</text>
</g>
<!-- 24&#45;&gt;27 -->
<g id="slsvg_edge28" class="edge">
<title>24&#45;&gt;27</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M887.9,-305.48C884.06,-277.59 881.73,-233.83 897,-200 898.1,-197.56 917.27,-179.73 934.34,-164.14"/>
<polygon fill="black" stroke="black" points="884.49,-306.34 889.47,-315.69 891.41,-305.28 884.49,-306.34"/>
<polygon fill="black" stroke="black" points="936.93,-166.51 941.96,-157.19 932.21,-161.34 936.93,-166.51"/>
<text text-anchor="middle" x="915.5" y="-222.3" font-family="Times,serif" font-size="14.00">24, 1</text>
</g>
<!-- 28 -->
<g id="slnode28" class="node">
<title>28</title>
<polygon fill="ivory" stroke="black" points="1035,-244 943,-244 943,-208 1035,-208 1035,-244"/>
<text text-anchor="middle" x="989" y="-222.3" font-family="Times,serif" font-size="14.00">Ident&lt;nl&gt;</text>
</g>
<!-- 24&#45;&gt;28 -->
<g id="slsvg_edge30" class="edge">
<title>24&#45;&gt;28</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M915.35,-308.32C930.63,-291.46 950.8,-269.17 966.18,-252.2"/>
<polygon fill="black" stroke="black" points="912.54,-306.21 908.42,-315.97 917.73,-310.91 912.54,-306.21"/>
<polygon fill="black" stroke="black" points="969.18,-254.1 973.3,-244.34 963.99,-249.4 969.18,-254.1"/>
<text text-anchor="middle" x="957.5" y="-286.8" font-family="Times,serif" font-size="14.00">24, 2</text>
</g>
<!-- 26&#45;&gt;24 -->
<!-- 27&#45;&gt;26 -->
<!-- 28&#45;&gt;27 -->
</g>
</svg>
<pre id="code">{
result: 1
number: 20
{
    (?  (> 0)
        {
            result:: (* result number)
            number:: (- number 1)
            @
        }
        (print "Factorial: " result nl))
}
}
</pre><div id="debug" style="border: 1px solid black;"></div><script>const srcMap = {
  "slnode1": { line: 1, eline: 12, column: 1, ecolumn: 1, tok: "Token::IBegin" },
  "slnode2": { line: 2, eline: 2, column: 1, ecolumn: 8, tok: "Token::Name" },
  "slnode3": { line: 2, eline: 2, column: 9, ecolumn: 10, tok: "Token::Number" },
  "slnode4": { line: 3, eline: 3, column: 1, ecolumn: 8, tok: "Token::Name" },
  "slnode5": { line: 3, eline: 3, column: 9, ecolumn: 11, tok: "Token::Number" },
  "slnode6": { line: 4, eline: 11, column: 1, ecolumn: 40, tok: "Token::IBegin" },
  "slnode7": { line: 5, eline: 11, column: 5, ecolumn: 39, tok: "Token::Begin" },
  "slnode9": { line: 5, eline: 5, column: 9, ecolumn: 13, tok: "Token::Begin" },
  "slnode11": { line: 5, eline: 5, column: 12, ecolumn: 13, tok: "Token::Number" },
  "slnode12": { line: 6, eline: 9, column: 9, ecolumn: 13, tok: "Token::IBegin" },
  "slnode13": { line: 7, eline: 7, column: 13, ecolumn: 20, tok: "Token::KnownName" },
  "slnode14": { line: 7, eline: 7, column: 22, ecolumn: 38, tok: "Token::Begin" },
  "slnode16": { line: 7, eline: 7, column: 25, ecolumn: 31, tok: "Token::Identifier" },
  "slnode17": { line: 7, eline: 7, column: 32, ecolumn: 38, tok: "Token::Identifier" },
  "slnode18": { line: 8, eline: 8, column: 13, ecolumn: 20, tok: "Token::KnownName" },
  "slnode19": { line: 8, eline: 8, column: 22, ecolumn: 33, tok: "Token::Begin" },
  "slnode21": { line: 8, eline: 8, column: 25, ecolumn: 31, tok: "Token::Identifier" },
  "slnode22": { line: 8, eline: 8, column: 32, ecolumn: 33, tok: "Token::Number" },
  "slnode23": { line: 9, eline: 9, column: 13, ecolumn: 13, tok: "Token::Loop" },
  "slnode24": { line: 11, eline: 11, column: 9, ecolumn: 39, tok: "Token::Begin" },
  "slnode26": { line: 11, eline: 11, column: 15, ecolumn: 28, tok: "Token::String" },
  "slnode27": { line: 11, eline: 11, column: 30, ecolumn: 36, tok: "Token::Identifier" },
  "slnode28": { line: 11, eline: 11, column: 37, ecolumn: 39, tok: "Token::Identifier" }
};

    window.onload = () => {
        for(const k in srcMap) {

            const node = document.getElementById(k);
            if(node) {
            node.onmouseenter = ()=>{
                const {line, eline, column, ecolumn} = srcMap[k];
                highlight(k, line, eline, column, ecolumn);

                document.getElementById('debug').innerHTML=JSON.stringify( srcMap[k], null, 4);

                const polygon = node.querySelector("polygon");

                // Save the original stroke
                const originalStroke = polygon.getAttribute("stroke");

                // Set a new stroke color
                polygon.setAttribute("stroke", "red");

                node.onmouseleave = ()=>{
                    polygon.setAttribute("stroke", originalStroke);
                };

            };
            } else {
           console.log("Not found",k);

            }
        }
        //




const graph = document.getElementById("slsvg");
const svg = graph.closest("svg");

let viewBox = { x: 0, y: 0, w: 800, h: 600 };  // Match initial viewBox
let isPanning = false;
let start = { x: 0, y: 0 };

svg.setAttribute("viewBox", `${viewBox.x} ${viewBox.y} ${viewBox.w} ${viewBox.h}`);
svg.style.width="100%";
svg.style.height="50%";
svg.style.border="1px solid black";

// Handle mouse drag
svg.addEventListener("mousedown", (e) => {
  isPanning = true;
  start = { x: e.clientX, y: e.clientY };
});

svg.addEventListener("mousemove", (e) => {
  if (!isPanning) return;
  const dx = (e.clientX - start.x) * viewBox.w / svg.clientWidth;
  const dy = (e.clientY - start.y) * viewBox.h / svg.clientHeight;
  viewBox.x -= dx;
  viewBox.y -= dy;
  svg.setAttribute("viewBox", `${viewBox.x} ${viewBox.y} ${viewBox.w} ${viewBox.h}`);
  start = { x: e.clientX, y: e.clientY };
});

svg.addEventListener("mouseup", () => isPanning = false);
svg.addEventListener("mouseleave", () => isPanning = false);

// Handle zoom
svg.addEventListener("wheel", (e) => {
  e.preventDefault();
  const zoom = e.deltaY > 0 ? 1.1 : 0.9;
  const mx = e.offsetX * viewBox.w / svg.clientWidth + viewBox.x;
  const my = e.offsetY * viewBox.h / svg.clientHeight + viewBox.y;

  viewBox.w *= zoom;
  viewBox.h *= zoom;
  viewBox.x = mx - (mx - viewBox.x) * zoom;
  viewBox.y = my - (my - viewBox.y) * zoom;

  svg.setAttribute("viewBox", `${viewBox.x} ${viewBox.y} ${viewBox.w} ${viewBox.h}`);
});

const lines = document.getElementById('code').textContent.split('\n');


function highlight(nodeId, lineBegin, lineEnd, columnBegin, columnEnd) {
  const pre = document.getElementById('code');


  pre.innerHTML = ''; // Clear content to rebuild with spans

  lines.forEach((line, i) => {
    const span = document.createElement('span');
    span.style.display = 'block';
    span.style.whiteSpace = 'pre';

    const l = i+1;
    if(l >= lineBegin && l <= lineEnd) {
      span.style.background = 'yellow';
    }

    span.textContent = line+"\n";
    pre.appendChild(span);
  });
}
};
</script></body></html>
